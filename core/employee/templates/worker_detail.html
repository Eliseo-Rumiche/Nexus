{% extends "layouts/base.html" %}
{% load static %}

{% block head %}
<link rel="stylesheet" href="{% static "/assets/vendor/libs/apex-charts/apex-charts.css" %}">
{% endblock head %}

{% block content %}
<div class="card mb-4">
    <h5 class="card-header">Información Personal:</h5>
    <!-- Account -->
    <div class="card-body">
      <div class="d-flex flex-column justify-content-center align-items-center align-items-sm-center mb-3">
      <img src="data:image/png;base64,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"/>
      
      <div class="d-flex flex-row">
        {% if worker.facebook_url %}
        
        <a href="{{worker.facebook_url}}" target="_blank" class="btn">
          <i class='bx bxl-facebook-square'></i>
        </a>
        {% endif %}
        {% if worker.instagram_url %}
        <a href="{{worker.instagram_url}}" target="_blank" class="btn">
          <i class='bx bxl-instagram-alt'  ></i>
        </a>
        {% endif %}
      </div>
    
    </div>
    <hr class="my-0">
    <div class="card-body">
        <div class="row">
          <div class="mb-3 col-md-6">
            <label for="firstName" class="form-label">Nombre Completo:</label>
            <input class="form-control" type="text"value="{{worker.get_fullname}}" disabled>
          </div>

          
          <div class="mb-3 col-md-6">
            <label for="firstName" class="form-label">Número Teléfonico (Whatsapp):</label>
            <input class="form-control" type="text"value="{{worker.phone_number}}" disabled>
          </div>

          <div class="mb-3 col-md-6">
            <label for="lastName" class="form-label">Email:</label>
            <input class="form-control" type="text" value="{{worker.email}}" disabled>
          </div>

          <div class="mb-3 col-md-6">
            <label for="firstName" class="form-label">Fecha De Nacimiento:</label>
            <input class="form-control" type="text"value="{{worker.birth_date}}" disabled>
          </div>

          <div class="mb-3 col-md-6">
            <label for="lastName" class="form-label">Área:</label>
            <input class="form-control" type="text" value="{{worker.field.name}}" disabled>
          </div>

          <div class="mb-3 col-md-6">
            <label for="lastName" class="form-label">Cargo:</label>
            <input class="form-control" type="text" value="{{worker.position.name}}" disabled>
          </div> 
        </div>
        
    </div>
</div>
</div>


<div class="row">
    <!-- estadistica asistencias -->
    <div class="col-md-6 col-lg-6 col-xl-6 order-0 mb-4">
      <div class="card h-100">
        <div class="card-header d-flex align-items-center justify-content-between pb-0">
          <div class="card-title mb-0">
            <h5 class="m-0 me-2">Estadística Asistencias</h5>
          </div>
        </div>
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center mb-3">
            <div class="d-flex flex-column align-items-center gap-1">
              <h2 class="mb-2">{{total_attendances}}</h2>
              <span>Asistencias Totales</span>
            </div>
            <div id="attendanceDetailChart"></div>
          </div>
          <ul class="p-0 m-0">
            <li class="d-flex mb-4 pb-1">
              <div class="avatar flex-shrink-0 me-3">
                <span class="avatar-initial rounded bg-label-success"
                  ><i class="bx bx-list-check"></i
                ></span>
                
              </div>
              <div class="d-flex w-100 flex-wrap align-items-center justify-content-between gap-2">
                <div class="me-2">
                  <h6 class="mb-0">Presente</h6>
                  <small class="text-muted">Total Asistencias Presentes</small>
                </div>
                <div class="user-progress">
                  <small class="fw-semibold">{{present_attendances.count}}</small>
                </div>
              </div>
            </li>
            <li class="d-flex mb-4 pb-1">
              <div class="avatar flex-shrink-0 me-3">
                <span class="avatar-initial rounded bg-label-danger"><i class="bx bx-list-minus"></i></span>
              </div>
              
              <div class="d-flex w-100 flex-wrap align-items-center justify-content-between gap-2">
                <div class="me-2">
                  <h6 class="mb-0">Ausente</h6>
                  <small class="text-muted">Total Asistencias Ausente</small>
                </div>
                <div class="user-progress">
                  <small class="fw-semibold">{{absent_attendances.count}}</small>
                </div>
              </div>
            </li>
            <li class="d-flex mb-4 pb-1">
              <div class="avatar flex-shrink-0 me-3">
                <span class="avatar-initial rounded bg-label-warning"><i class="bx bxs-timer"></i></span>
              </div>
              <div class="d-flex w-100 flex-wrap align-items-center justify-content-between gap-2">
                <div class="me-2">
                  <h6 class="mb-0">Justificado</h6>
                  <small class="text-muted">Total Asistencias Justificadas</small>
                </div>
                <div class="user-progress">
                  <small class="fw-semibold">{{excused_attendances.count}}</small>
                </div>
              </div>
            </li>
            <li class="d-flex">
              <div class="avatar flex-shrink-0 me-3">
                <span class="avatar-initial rounded bg-label-secondary"
                  ><i class="bx bxs-error-alt"></i
                ></span>
              </div>
              <div class="d-flex w-100 flex-wrap align-items-center justify-content-between gap-2">
                <div class="me-2">
                  <h6 class="mb-0">Sin Marcar</h6>
                  <small class="text-muted">Total Asistencias Sin Marcar</small>
                </div>
                <div class="user-progress">
                  <small class="fw-semibold">{{unmarked_attendances.count}}</small>
                </div>
              </div>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <!--/ estadistica asistencias -->

    <!-- Transactions -->
    <div class="col-md-6 col-lg-6 order-2 mb-4">
      <div class="card h-100">
        <div class="card-header d-flex align-items-center justify-content-between">
          <h5 class="card-title m-0 me-2">Últimas 6 asistencias</h5>
        </div>
        <div class="card-body">
          <ul class="p-0 m-0">

            {% for attendance in last_attendances %}

            <li class="d-flex mb-4 pb-1">
              <div class="avatar flex-shrink-0 me-3">
                {% if attendance.status == 'P' %}
                <span class="avatar-initial rounded bg-label-success"
                  ><i class="bx bx-list-check"></i
                ></span>
                {% elif attendance.status == 'A' %}
                <span class="avatar-initial rounded bg-label-success"
                  ><i class="bx bx-list-check"></i
                ></span>
                {% elif attendance.status == 'E' %}
                <span class="avatar-initial rounded bg-label-warning"><i class="bx bxs-timer"></i></span>
                {% elif attendance.status == None %}
                <span class="avatar-initial rounded bg-label-secondary"
                  ><i class="bx bxs-error-alt"></i
                ></span>
                {% endif %}
                
              </div>
              <div class="d-flex w-100 flex-wrap align-items-center justify-content-between gap-2">
                <div class="me-2">
                  <small class="text-muted d-block mb-1">{{attendance.meeting.name |truncatechars:30}}</small>
                  {% comment %} <h6 class="mb-0">Send money</h6> {% endcomment %}
                </div>
                <div class="user-progress d-flex align-items-center gap-1">
                  <h6 class="mb-0">{{attendance.meeting.date}}</h6>
                </div>
              </div>
            </li>

            {% endfor %}
            

          </ul>
        </div>
      </div>
    </div>
    <!--/ Transactions -->

  </div>
</div>


  {% endblock content %}

  {% block scripts %}
  <script src="{% static "/assets/vendor/libs/apex-charts/apexcharts.js" %}"></script>
  <script>
    const labels_chart = {{chart_data.labels | safe}}
    const series_chart = {{chart_data.series | safe}}
    const total_attendances = {{total_attendances}}
  </script>
  <script src="{% static "js/worker.js" %}"></script>
  {% endblock scripts %}
